const produtosPorPagina=18;let produtos=[],produtosFiltrados=[],paginaAtual=1;function carregarProdutos(){fetch("json/produtos.json").then((t=>t.json())).then((t=>{produtos=t,produtosFiltrados=[...produtos],paginaAtual=1,atualizarInterface()})).catch((t=>console.error("Erro ao carregar os produtos:",t)))}function atualizarInterface(){renderizarProdutos(),renderizarPaginacao(),iniciarLazyLoad()}function renderizarProdutos(){const t=document.querySelector(".cards-products");if(t.innerHTML="",0===produtosFiltrados.length)return void(t.innerHTML="<p class='text-center'>Nenhum produto encontrado.</p>");const a=(paginaAtual-1)*produtosPorPagina,e=a+produtosPorPagina;produtosFiltrados.slice(a,e).forEach((a=>{const e=document.createElement("div");e.classList.add("card"),e.innerHTML=`\n            <img data-src="${a.imagem}" class="card-img-top img-lazy" alt="${a.nome}">\n            <div class="card-body">\n                <h5 class="card-title">${a.nome}</h5>\n                <p class="card-text">${a.descricao}</p>\n                <a href="${a.link}" class="btn btn-primary">Saiba mais</a>\n            </div>\n        `,t.appendChild(e)})),iniciarLazyLoad()}function renderizarPaginacao(){const t=Math.ceil(produtosFiltrados.length/produtosPorPagina),a=document.querySelector(".pagination");if(a.innerHTML="",!(t<=1))for(let e=1;e<=t;e++){const t=document.createElement("button");t.textContent=e,t.classList.add("btn","btn-secondary","m-1"),t.onclick=()=>{paginaAtual=e,atualizarInterface()},e===paginaAtual&&(t.disabled=!0),a.appendChild(t)}}function iniciarLazyLoad(){const t=document.querySelectorAll(".img-lazy"),a=new IntersectionObserver(((t,a)=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target;e.src=e.dataset.src,e.classList.remove("img-lazy"),a.unobserve(e)}}))}));t.forEach((t=>a.observe(t)))}function filtrarProdutos(){const t=document.querySelector("#search-input").value.trim().toLowerCase();produtosFiltrados=produtos.filter((a=>a.nome.toLowerCase().includes(t)||a.descricao.toLowerCase().includes(t))),paginaAtual=1,atualizarInterface()}function resetarPesquisa(){produtosFiltrados=[...produtos],paginaAtual=1,atualizarInterface()}document.addEventListener("DOMContentLoaded",(()=>{carregarProdutos();const t=document.querySelector("#search-input"),a=document.querySelector("#search-btn");t.addEventListener("keypress",(t=>{"Enter"===t.key&&(t.preventDefault(),filtrarProdutos())})),a.addEventListener("click",(()=>{event.preventDefault(),filtrarProdutos()})),t.addEventListener("input",(()=>{""===t.value.trim()&&resetarPesquisa()}))}));